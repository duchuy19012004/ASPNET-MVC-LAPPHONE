@model phonev2.Models.LinhKien
@{
    Layout = "_AdminLayout";
}


@section PageActions {
    <a asp-action="Index" class="btn btn-secondary">
        <i class="fas fa-arrow-left me-1"></i> Quay Lại
    </a>
}


<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow border-danger">
            <div class="card-header bg-danger text-white">
                <h4 class="mb-0">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Xác Nhận Xóa Linh Kiện
                </h4>
            </div>
            <div class="card-body">
                <div class="alert alert-warning" role="alert">
                    <h5 class="alert-heading">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Cảnh Báo!
                    </h5>
                    <p class="mb-0">
                        Bạn đang chuẩn bị xóa linh kiện <strong>"@Model.TenLinhKien"</strong>. 
                        Hành động này không thể hoàn tác và sẽ xóa vĩnh viễn tất cả dữ liệu liên quan.
                    </p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-muted mb-3">
                            <i class="fas fa-info-circle me-2"></i>Thông Tin Linh Kiện
                        </h6>
                        <table class="table table-borderless">
                            <tr>
                                <td class="text-muted">Mã linh kiện:</td>
                                <td><strong>#@Model.MaLinhKien</strong></td>
                            </tr>
                            <tr>
                                <td class="text-muted">Tên linh kiện:</td>
                                <td><strong>@Model.TenLinhKien</strong></td>
                            </tr>
                            <tr>
                                <td class="text-muted">Loại linh kiện:</td>
                                <td>
                                    <span class="badge bg-info">
                                        @Model.LoaiLinhKien?.TenLoaiLinhKien
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-muted">Hãng sản xuất:</td>
                                <td>
                                    @if (!string.IsNullOrEmpty(Model.HangSanXuat))
                                    {
                                        <span class="badge bg-secondary">@Model.HangSanXuat</span>
                                    }
                                    else
                                    {
                                        <em class="text-muted">Chưa có</em>
                                    }
                                </td>
                            </tr>
                            <tr>
                                <td class="text-muted">Giá nhập:</td>
                                <td><strong class="text-primary">@Model.GiaNhapText</strong></td>
                            </tr>
                            <tr>
                                <td class="text-muted">Giá bán:</td>
                                <td><strong class="text-success">@Model.GiaBanText</strong></td>
                            </tr>
                            <tr>
                                <td class="text-muted">Tồn kho:</td>
                                <td>
                                    <span class="@Model.TonKhoCssClass">@Model.SoLuongTon</span>
                                    <small class="text-muted">(@Model.TrangThaiTonKho)</small>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-muted">Lợi nhuận:</td>
                                <td>
                                    <strong class="@(Model.LoiNhuan > 0 ? "text-success" : Model.LoiNhuan < 0 ? "text-danger" : "text-muted")">
                                        @Model.LoiNhuanText (@Model.TyLeLoiNhuan%)
                                    </strong>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-muted">Trạng thái:</td>
                                <td>
                                    <span class="badge @(Model.TrangThai ? "bg-success" : "bg-secondary")">
                                        @Model.TrangThaiText
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-muted">Ngày tạo:</td>
                                <td><strong>@Model.NgayTao.ToString("dd/MM/yyyy HH:mm")</strong></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-muted mb-3">
                            <i class="fas fa-cogs me-2"></i>Thông Số Kỹ Thuật
                        </h6>
                        @if (!string.IsNullOrEmpty(Model.ThongSoKyThuat))
                        {
                            <div class="bg-light p-3 rounded">
                                <p class="mb-0">@Model.ThongSoKyThuat</p>
                            </div>
                        }
                        else
                        {
                            <em class="text-muted">Chưa có thông số kỹ thuật</em>
                        }

                        <div class="mt-4">
                            <h6 class="text-muted mb-3">
                                <i class="fas fa-chart-line me-2"></i>Phân Tích Lợi Nhuận
                            </h6>
                            <div class="row text-center">
                                <div class="col-6">
                                    <div class="border-end">
                                        <h5 class="text-primary mb-1">@Model.GiaNhapText</h5>
                                        <small class="text-muted">Giá nhập</small>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <h5 class="text-success mb-1">@Model.GiaBanText</h5>
                                    <small class="text-muted">Giá bán</small>
                                </div>
                            </div>
                            <hr class="my-2">
                            <div class="row text-center">
                                <div class="col-6">
                                    <div class="border-end">
                                        <h5 class="@(Model.LoiNhuan > 0 ? "text-success" : "text-danger") mb-1">@Model.LoiNhuanText</h5>
                                        <small class="text-muted">Lợi nhuận/cái</small>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <h5 class="text-warning mb-1">@((Model.LoiNhuan * Model.SoLuongTon).ToString("N0")) VNĐ</h5>
                                    <small class="text-muted">Lợi nhuận tổng</small>
                                </div>
                            </div>
                        </div>

                        @if (Model.LoaiLinhKien?.ThoiGianBaoHanh.HasValue == true && Model.LoaiLinhKien.ThoiGianBaoHanh > 0)
                        {
                            <div class="mt-3">
                                <span class="badge bg-success fs-6 px-3 py-2">
                                    <i class="fas fa-shield-alt me-1"></i>
                                    Bảo hành: @Model.LoaiLinhKien.ThoiGianBaoHanh tháng
                                </span>
                            </div>
                        }
                    </div>
                </div>

                <hr class="my-4">

                <div class="alert alert-danger" role="alert">
                    <h6 class="alert-heading">
                        <i class="fas fa-times-circle me-2"></i>
                        Hậu Quả Của Việc Xóa
                    </h6>
                    <ul class="mb-0">
                        <li>Linh kiện sẽ bị xóa vĩnh viễn khỏi hệ thống</li>
                        <li>Tất cả thông tin liên quan sẽ bị mất</li>
                        <li>Không thể khôi phục lại dữ liệu đã xóa</li>
                        <li>Có thể ảnh hưởng đến các phiếu sửa chữa đang sử dụng linh kiện này</li>
                        <li>Giá trị tồn kho hiện tại: <strong>@((Model.GiaNhap * Model.SoLuongTon).ToString("N0")) VNĐ</strong></li>
                    </ul>
                </div>

                <form asp-action="Delete" method="post">
                    <input type="hidden" asp-for="MaLinhKien" />
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a asp-action="Index" class="btn btn-secondary btn-lg me-2">
                            <i class="fas fa-times me-1"></i>
                            Hủy Bỏ
                        </a>
                        <button type="submit" class="btn btn-danger btn-lg">
                            <i class="fas fa-trash me-1"></i>
                            Xác Nhận Xóa
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div> 